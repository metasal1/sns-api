<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- twitter cards -->

<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:site" content="@metasal_">
<meta name="twitter:creator" content="@metasal_">
<meta name="twitter:title" content="Solana Name Lookup service">
<meta name="twitter:description" content="Lookup Solana names and details about them - quick and easy">
<meta name="twitter:image" content="https://sns-api.milysec.com/sns-desktop.png">
<meta name="twitter:image:alt" content="Basic view of the search page of Solana Name Service search">
<meta name="twitter:url" content="https://sns-api.milysec.com">

<!-- open graph standard  -->

<meta property="og:type" content="article" />
<meta property="og:title" content="Solana Name Lookup service" />
<meta property="og:description" content="Lookup Solana names and details about them - quick and easy" />
<meta property="og:url" content="https://sns-api.milysec.com/" />
<meta property="og:image" content="https://sns-api.milysec.com/sns-desktop.png" />

    <title>Solana Name Search</title>
    <!-- <script src="https://cdn.tailwindcss.com"></script> -->
    <link rel="stylesheet" href="styled.css" />
  </head>
  <body>
    <div class=" bg-white rounded-xl shadow-lg m-5 p-5 grid place-content-center justify-center content-center place-self-center text-center">
      <h1 class="text-2xl lg:text-5xl font-bold m-10">SOLANA NAME SEARCH</h1>
      <a href="index.html">
        <button class="btn-primary">
          Search by Name
        </button>
      </a>
      <a href="twitter.html">
        <button class="btn-primary opacity-50" disabled >
          Search by Twitter
        </button>
      </a>
      <div>
        <input
          id="value"
          type="search"
          class="m-5 border rounded-lg border-sky-500 p-5 lowercase"
          placeholder="Type twitter handle"
          required
          spellcheck="false"
        />
      </div><div>
      <button
        id="searchBtn"
        class="btn-primary"
        onclick="search();"
      >
        SEARCH
      </div>
      </button>
      <div id="resultsBox" class="resultsBox"></div>
<div class="font-bold">Features Coming Soon üëá</div>
  <hr>
<div class="text-left m-5">

  <div >
    ‚¶ø Buy your Name
  </div>  
  <div>
    ‚¶ø Search by Twitter handle ‚úÖ
  </div>
</div>
  Suggestions? Feedback? Contribute? 
  <a rel="noopener" href="https://github.com/metasal1/sns-api" target="_blank"><img class="mx-auto" width='20' src="github.png" title="github logo"  /></a>
</div>
    <div class="footer">

      <p class="text-xs padding-10 margin-10">
        Made with ‚ù§Ô∏è in Melbourne by
        <a
        rel="noopener"
        class="hover:text-bold underline"
        href="https://milysec.com"
        target="_blank"
        >Milysec</a
        >
      </p>
    </div>
    <script>
      document
        .getElementById("searchBtn")
        .addEventListener("click", function (event) {
          event.preventDefault();
        });
    </script>
    <script>
      function search() {
        let headersList = {
          Accept: "*/*",
        };
        let result = document.getElementById("value").value.trim();
        var resultsDiv = document.getElementById('resultsBox');
          resultsDiv.innerHTML = 'loading...'
        fetch("/api/twitter/" + result)
          .then(function (response) {
            return response.json();
          })
          .then(function (data) {
              // let data = {
              //     data: "metasal",
              //     publicKey: "GaxVqiQyJKQDRu6H4pfy9V6Xq19pHGr6HQKDQDv911Y4",
              //     nftOwner: "undefined",
              // };
            console.log(data);

            var resultsDiv = document.getElementById('resultsBox');
            var dateNow = new Date(Date.now())
            console.log(dateNow)

            resultsDiv.innerHTML = `
            <div class="font-bold">Twitter Handle</div>   <div id='dn' class='results'>${data.handle}</div><button onclick="copyFtn('dn')">‚úÇÔ∏è</button>
            <button onclick='window.open("https://twitter.com/${data.handle}")'> üê¶ </button>
            <div class="font-bold">Public Key</div>   <div id='pk' class='results'>${data.owner}</div><button onclick="copyFtn('pk')">‚úÇÔ∏è</button>
            <button onclick='window.open("https://solscan.io/account/${data.owner}")'> üîé </button>
            <div class="font-bold">Date</div>   <div class='text-xs' >${dateNow}</div>
           `;
          });
      }

      function copyFtn(a) {
        var copyText = document.getElementById(a);
        let d = copyText.innerText;
        navigator.clipboard.writeText(d);
      }
    </script>
  </body>
</html>
